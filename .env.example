# ============================================
# DMS Hub - Environment Variables
# ============================================
# Copia questo file in .env e compila i valori.
# NON committare .env - e' nel .gitignore.
# ============================================

# ---------- Backend ----------

# PostgreSQL connection string (Neon serverless)
# Formato: postgres://user:password@host/database?sslmode=require
DATABASE_URL=

# Secret per firmare i token JWT di sessione
JWT_SECRET=

# OAuth Manus - Application ID
VITE_APP_ID=

# OAuth Manus - Server URL
OAUTH_SERVER_URL=

# OpenID dell'utente admin (viene assegnato role=admin automaticamente)
OWNER_OPEN_ID=

# Forge API (per build tools)
BUILT_IN_FORGE_API_URL=
BUILT_IN_FORGE_API_KEY=

# Ambiente
NODE_ENV=development

# Porta server (default: 3000, trova automaticamente la prossima se occupata)
PORT=3000

# ---------- Frontend (VITE_*) ----------
# Le variabili con prefisso VITE_ sono esposte al frontend via Vite.

# URL del backend tRPC
# Development: http://localhost:3000/api/trpc
# Production:  https://mihub.157-90-29-66.nip.io/api/trpc
VITE_TRPC_URL=http://localhost:3000/api/trpc

# URL base API
VITE_API_URL=http://localhost:3000

# ---------- Firebase ----------
# Progetto: dmshub-auth-2975e

VITE_FIREBASE_API_KEY=
VITE_FIREBASE_AUTH_DOMAIN=
VITE_FIREBASE_PROJECT_ID=
VITE_FIREBASE_STORAGE_BUCKET=
VITE_FIREBASE_MESSAGING_SENDER_ID=
VITE_FIREBASE_APP_ID=

# ---------- E-FIL PagoPA (opzionale) ----------
# Necessario solo per integrazione pagamenti PagoPA

# EFIL_BASE_URL=https://test.plugnpay.efil.it/plugnpay
# EFIL_USERNAME=
# EFIL_PASSWORD=
# EFIL_APPLICATION_CODE=
# EFIL_ID_GESTIONALE=
# DMS_PAGOPA_RETURN_URL=
# DMS_PAGOPA_CALLBACK_URL=

# ---------- MIHUB API (opzionale) ----------
# URL per comunicazione multi-agente

# VITE_MIHUB_API_URL=https://mihub.157-90-29-66.nip.io

# ---------- PDND (Piattaforma Digitale Nazionale Dati) ----------
# Interoperabilita' PDND + ANPR. Default: mock mode.
# Ambienti: uat (test) | production
# Token URL produzione: https://auth.interop.pagopa.it/token.oauth2
# Token URL UAT: https://auth.uat.interop.pagopa.it/token.oauth2
# API v2 produzione: https://api.interop.pagopa.it/v2
# ANPR produzione: https://modipa.anpr.interno.it/govway/rest/in/MinInternoPortaANPR-PDND
# ANPR UAT: https://modipa-val.anpr.interno.it/govway/rest/in/MinInternoPortaANPR-PDND

# PDND_ENVIRONMENT=uat
# PDND_CLIENT_ID=                    # UUID client registrato su PDND
# PDND_KID=                          # kid della chiave pubblica depositata su PDND
# PDND_RSA_PRIVATE_KEY=              # Chiave privata RSA (PEM, min 2048 bit)
# PDND_PURPOSE_ID=                   # UUID finalita' (richiesto per e-Service, omesso per API Interop)
# PDND_MOCK_MODE=true

# ---------- App IO ----------
# Notifiche cittadini tramite App IO. Default: mock mode.
# API: https://api.io.pagopa.it/api/v1/
# Auth: Ocp-Apim-Subscription-Key (Service Key per invio)
# CF di test (trial mode): AAAAAA00A00A000A
# Portal: selfcare.pagopa.it (Area Riservata)

# APPIO_BASE_URL=https://api.io.pagopa.it/api/v1
# APPIO_API_KEY=                     # Ocp-Apim-Subscription-Key (Service Key)
# APPIO_MOCK_MODE=true

# ---------- SSO (SPID/CIE/CNS/eIDAS) ----------
# Login federato via ARPA Regione Toscana â†’ Manus OAuth Server.
# SPID/CIE/CNS gia' integrati tramite oauth.ts + authClient.ts.
# SSO_MOCK_MODE controlla solo il pannello di monitoraggio.

# SSO_MOCK_MODE=true

# ---------- Note ----------
# - Il frontend NON deve avere accesso diretto al database
# - Tutte le operazioni passano attraverso tRPC (/api/trpc/*)
# - Le variabili senza VITE_ sono solo backend (non esposte al browser)
# - Per produzione, vedi .env.production per i valori VITE_*
